<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Gojs组件------前端图形化插件之利器 | Rainux</title><meta name="keywords" content="前端；生活；美好；"><meta name="author" content="Rainux"><meta name="copyright" content="Rainux"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Code is never die！ 前言使用 jsPlumb 这个组件本身还不错，使用方便、入门简单、轻量级，但是使用一段时间下来，发现一些弊病，比如组件不太稳定，初始进入页面的时候连线的样式有时会乱掉，刷新页面之后才能恢复正常，而且连线样式比较单一，容易让人产生视觉疲劳，加之最近公司在大力推行所谓的“工业 4.0”，除了对自动化控制要求的提高之外，对这种图形化界面的要求也随之提高，所以单纯的">
<meta property="og:type" content="article">
<meta property="og:title" content="Gojs组件------前端图形化插件之利器">
<meta property="og:url" content="https://rainuxs.github.io/rainuxs.github.io/Gojs%E7%BB%84%E4%BB%B6------%E5%89%8D%E7%AB%AF%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%8F%92%E4%BB%B6%E4%B9%8B%E5%88%A9%E5%99%A8/index.html">
<meta property="og:site_name" content="Rainux">
<meta property="og:description" content="Code is never die！ 前言使用 jsPlumb 这个组件本身还不错，使用方便、入门简单、轻量级，但是使用一段时间下来，发现一些弊病，比如组件不太稳定，初始进入页面的时候连线的样式有时会乱掉，刷新页面之后才能恢复正常，而且连线样式比较单一，容易让人产生视觉疲劳，加之最近公司在大力推行所谓的“工业 4.0”，除了对自动化控制要求的提高之外，对这种图形化界面的要求也随之提高，所以单纯的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://rainuxs.github.io/rainuxs.github.io/img/pexels-christina-morillo-1181298.jpg">
<meta property="article:published_time" content="2021-07-01T02:00:00.000Z">
<meta property="article:modified_time" content="2022-08-19T02:41:37.946Z">
<meta property="article:author" content="Rainux">
<meta property="article:tag" content="前端；生活；美好；">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://rainuxs.github.io/rainuxs.github.io/img/pexels-christina-morillo-1181298.jpg"><link rel="shortcut icon" href="/img/icon.ico"><link rel="canonical" href="https://rainuxs.github.io/rainuxs.github.io/Gojs%E7%BB%84%E4%BB%B6------%E5%89%8D%E7%AB%AF%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%8F%92%E4%BB%B6%E4%B9%8B%E5%88%A9%E5%99%A8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/js/dependCDN/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/js/dependCDN/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-right"},
  source: {
    jQuery: '/js/dependCDN/jquery.min.js',
    justifiedGallery: {
      js: '/js/dependCDN/jquery.justifiedGallery.min.js',
      css: '/js/dependCDN/justifiedGallery.min.css'
    },
    fancybox: {
      js: '/js/dependCDN/jquery.fancybox.min.js',
      css: '/js/dependCDN/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Gojs组件------前端图形化插件之利器',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: ,
  postUpdate: '2022-08-19 10:41:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/iconset.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/avatar_img.png" onerror="onerror=null;src='/img/loading.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/musics/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><i class="fa-fw fas fa-tools"></i><span> 工具</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/pexels-christina-morillo-1181298.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Rainux</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/musics/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><i class="fa-fw fas fa-tools"></i><span> 工具</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Gojs组件------前端图形化插件之利器</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-07-01T02:00:00.000Z" title="发表于 2021-07-01 10:00:00">2021-07-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-19T02:41:37.946Z" title="更新于 2022-08-19 10:41:37">2022-08-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web/">Web</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>32分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Gojs组件------前端图形化插件之利器"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><strong>Code is never die！</strong></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>使用 jsPlumb 这个组件本身还不错，使用方便、入门简单、轻量级，但是使用一段时间下来，发现一些弊病，比如组件不太稳定，初始进入页面的时候连线的样式有时会乱掉，刷新页面之后才能恢复正常，而且连线样式比较单一，容易让人产生视觉疲劳，加之最近公司在大力推行所谓的“工业 4.0”，除了对自动化控制要求的提高之外，对这种图形化界面的要求也随之提高，所以单纯的 jsPlumb 组件效果已经不能满足日益发展的公司业务。基于以上种种，最终找到了 Gojs 组件，它效果强大、api 丰富，唯一的不足就是这个组件是一个收费组件，可是在天朝，嘘…这是个不能说的秘密！</p>
<h1 id="一、组件效果预览"><a href="#一、组件效果预览" class="headerlink" title="一、组件效果预览"></a>一、组件效果预览</h1><p>先来两个炫酷点的效果：<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420173655509.gif" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420173716399.gif" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420173731858.gif" alt="在这里插入图片描述"><br>就最下面两个效果而言，就是 jsPlumb 无法实现的，可是这种效果在 MES 系统里面是很吸引人的，尤其是一些流程性的业务，用这种效果实现让可以一眼就感觉高大上了。并且咋一眼看上去，你根本都不相信这是一个 web 页面的效果。</p>
<p>其他效果示例：<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420173759992.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTkxODY1Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/2021042017381095.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTkxODY1Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>可折叠的树：<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420173834649.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTkxODY1Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>这是图片吗？<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/2021042017384774.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTkxODY1Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>竟然还可以生成图表！<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420173900441.gif" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420173914283.gif" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420173924320.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTkxODY1Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>想抢 visio 的饭碗吗？<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420174031610.gif" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420174050114.gif" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420174101683.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTkxODY1Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>更多示例可查看<a target="_blank" rel="noopener" href="https://gojs.net/latest/samples/index.html">GoJS</a></p>
<h1 id="二、初次接触"><a href="#二、初次接触" class="headerlink" title="二、初次接触"></a>二、初次接触</h1><p>老规矩，还是先来个入门教程。</p>
<p>源码下载：<a target="_blank" rel="noopener" href="https://github.com/NorthwoodsSoftware/GoJS">https://github.com/NorthwoodsSoftware/GoJS</a></p>
<p>api 详情：<a target="_blank" rel="noopener" href="https://gojs.net/latest/api/index.html">https://gojs.net/latest/api/index.html</a></p>
<p>示例地址：<a target="_blank" rel="noopener" href="https://gojs.net/latest/samples/index.html">https://gojs.net/latest/samples/index.html</a></p>
<h2 id="1、Gojs-简介"><a href="#1、Gojs-简介" class="headerlink" title="1、Gojs 简介"></a>1、Gojs 简介</h2><p>GoJS 是一个功能丰富的 JS 库，在 Web 浏览器和平台上可实现自定义交互图和复杂的可视化效果，它用自定义模板和布局组件简化了节点、链接和分组等复杂的 JS 图表，给用户交互提供了许多先进的功能，如拖拽、复制、粘贴、文本编辑、工具提示、上下文菜单、自动布局、模板、数据绑定和模型、事务状态和撤销管理、调色板、概述、事件处理程序、命令和自定义操作的扩展工具系统。无需切换服务器和插件，GoJS 就能实现用户互动并在浏览器中完全运行，呈现 HTML5 Canvas 元素或 SVG，也不用服务器端请求。 GoJS 不依赖于任何 JS 库或框架（例如 bootstrap、jquery 等），可与任何 HTML 或 JS 框架配合工作，甚至可以不用框架。</p>
<h2 id="2、使用入门"><a href="#2、使用入门" class="headerlink" title="2、使用入门"></a>2、使用入门</h2><p>（1）文件引用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;gojs/go-debug_ok.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>可以用 cdn 上面的最新版本，也可以引用本地 down 下来的文件。如果是开发，可以引用 debug 版本的 js，正式运行的时候引用正式的 js，这个无需多讲。</p>
<p>（2）创建画布</p>
<p>随便定义一个 html 元素，作为我们的画布</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;myDiagramDiv&quot;</span> style=<span class="string">&quot;margin:auto;width:300px; height:300px; background-color:#ddd;&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>然后使用 gojs 的 api 初始化画布</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建画布</span></span><br><span class="line"><span class="keyword">var</span> objGo = go.GraphObject.make;</span><br><span class="line"><span class="keyword">var</span> myDiagram = objGo(go.Diagram, <span class="string">&#x27;myDiagramDiv&#x27;</span>, &#123;</span><br><span class="line">	<span class="comment">//模型图的中心位置所在坐标</span></span><br><span class="line">	<span class="attr">initialContentAlignment</span>: go.Spot.Center,</span><br><span class="line"></span><br><span class="line">	<span class="comment">//允许用户操作图表的时候使用Ctrl-Z撤销和Ctrl-Y重做快捷键</span></span><br><span class="line">	<span class="string">&#x27;undoManager.isEnabled&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">	<span class="comment">//不运行用户改变图表的规模</span></span><br><span class="line">	<span class="attr">allowZoom</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">	<span class="comment">//画布上面是否出现网格</span></span><br><span class="line">	<span class="string">&#x27;grid.visible&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">	<span class="comment">//允许在画布上面双击的时候创建节点</span></span><br><span class="line">	<span class="string">&#x27;clickCreatingTool.archetypeNodeData&#x27;</span>: &#123; <span class="attr">text</span>: <span class="string">&#x27;Node&#x27;</span> &#125;,</span><br><span class="line"></span><br><span class="line">	<span class="comment">//允许使用ctrl+c、ctrl+v复制粘贴</span></span><br><span class="line">	<span class="string">&#x27;commandHandler.copiesTree&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">	<span class="comment">//允许使用delete键删除节点</span></span><br><span class="line">	<span class="string">&#x27;commandHandler.deletesTree&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">	<span class="comment">// dragging for both move and copy</span></span><br><span class="line">	<span class="string">&#x27;draggingTool.dragsTree&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>官方示例用的<code>$</code>符号作为变量，博主觉得<code>$</code>符号太敏感，还是换个名字吧~以上几个参数都是博主摘选的，更多初始化画布的参数请参考官方 api 下图：<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420174518606.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTkxODY1Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>3）创建模型数据（Model）</p>
<p>接着上面的代码，我们增加如下几行</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myModel = objGo(go.Model); <span class="comment">//创建Model对象</span></span><br><span class="line"><span class="comment">// model中的数据每一个js对象都代表着一个相应的模型图中的元素</span></span><br><span class="line">myModel.nodeDataArray = [&#123; <span class="attr">key</span>: <span class="string">&#x27;工厂&#x27;</span> &#125;, &#123; <span class="attr">key</span>: <span class="string">&#x27;车间&#x27;</span> &#125;, &#123; <span class="attr">key</span>: <span class="string">&#x27;工人&#x27;</span> &#125;, &#123; <span class="attr">key</span>: <span class="string">&#x27;岗位&#x27;</span> &#125;];</span><br><span class="line">myDiagram.model = myModel; <span class="comment">//将模型数据绑定到画布图上</span></span><br></pre></td></tr></table></figure>

<p>效果预览<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420174604965.gif" alt="在这里插入图片描述"><br>4）创建节点（Node）</p>
<p>上面有了画布和节点数据，只是有了一个雏形，但是还没有任何的图形化效果。我们加入一些效果试试</p>
<p>在 gojs 里面给我们提供了几种模型节点的可选项：</p>
<p><a target="_blank" rel="noopener" href="https://gojs.net/latest/intro/shapes.html">Shape</a>:形状——Rectangle（矩形）、RoundedRectangle（圆角矩形），Ellipse（椭圆形），Triangle（三角形），Diamond（菱形），Circle（圆形）等<br><a target="_blank" rel="noopener" href="https://gojs.net/latest/intro/textblocks.html">TextBlock</a>:文本域（可编辑）<br><a target="_blank" rel="noopener" href="https://gojs.net/latest/intro/pictures.html">Picture</a>:图片<br><a target="_blank" rel="noopener" href="https://gojs.net/latest/intro/panels.html">Panel</a>:容器来保存其他 Node 的集合<br>默认的节点模型代码只是由一个 TextBlock 组件构建成<br>我们增加如下一段代码：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义一个简单的节点模板</span></span><br><span class="line">myDiagram.nodeTemplate = objGo(</span><br><span class="line">	go.Node,</span><br><span class="line">	<span class="string">&#x27;Horizontal&#x27;</span>, <span class="comment">//横向布局的面板</span></span><br><span class="line">	<span class="comment">// 节点淡蓝色背景</span></span><br><span class="line">	&#123; <span class="attr">background</span>: <span class="string">&#x27;#44CCFF&#x27;</span> &#125;,</span><br><span class="line">	objGo(</span><br><span class="line">		go.Shape,</span><br><span class="line">		<span class="string">&#x27;RoundedRectangle&#x27;</span>, <span class="comment">//定义形状，这是圆角矩形</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">/* Shape的参数。宽高颜色等等*/</span> figure: <span class="string">&#x27;Club&#x27;</span>,</span><br><span class="line">			<span class="attr">width</span>: <span class="number">40</span>,</span><br><span class="line">			<span class="attr">height</span>: <span class="number">60</span>,</span><br><span class="line">			<span class="attr">margin</span>: <span class="number">4</span>,</span><br><span class="line">			<span class="attr">fill</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="comment">// 绑定 Shape.figure属性为Node.data.fig的值，Model对象可以通过Node.data.fig 获取和设置Shape.figure（修改形状）</span></span><br><span class="line">		<span class="keyword">new</span> go.Binding(<span class="string">&#x27;figure&#x27;</span>, <span class="string">&#x27;fig&#x27;</span>),</span><br><span class="line">		<span class="keyword">new</span> go.Binding(<span class="string">&#x27;fill&#x27;</span>, <span class="string">&#x27;fill2&#x27;</span>)</span><br><span class="line">	),</span><br><span class="line">	objGo(</span><br><span class="line">		go.TextBlock,</span><br><span class="line">		<span class="string">&#x27;Default Text&#x27;</span>, <span class="comment">// 默认文本</span></span><br><span class="line">		<span class="comment">// 设置字体大小颜色以及边距</span></span><br><span class="line">		&#123; <span class="attr">margin</span>: <span class="number">12</span>, <span class="attr">stroke</span>: <span class="string">&#x27;white&#x27;</span>, <span class="attr">font</span>: <span class="string">&#x27;bold 16px sans-serif&#x27;</span> &#125;,</span><br><span class="line">		<span class="comment">//绑定TextBlock.text 属性为Node.data.name的值，Model对象可以通过Node.data.name获取和设置TextBlock.text</span></span><br><span class="line">		<span class="keyword">new</span> go.Binding(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">	)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myModel = objGo(go.Model); <span class="comment">//创建Model对象</span></span><br><span class="line"><span class="comment">// model中的数据每一个js对象都代表着一个相应的模型图中的元素</span></span><br><span class="line">myModel.nodeDataArray = [</span><br><span class="line">	&#123; <span class="attr">name</span>: <span class="string">&#x27;工厂&#x27;</span>, <span class="attr">fig</span>: <span class="string">&#x27;YinYang&#x27;</span>, <span class="attr">fill2</span>: <span class="string">&#x27;blue&#x27;</span> &#125;,</span><br><span class="line">	&#123; <span class="attr">name</span>: <span class="string">&#x27;车间&#x27;</span>, <span class="attr">fig</span>: <span class="string">&#x27;Peace&#x27;</span>, <span class="attr">fill2</span>: <span class="string">&#x27;red&#x27;</span> &#125;,</span><br><span class="line">	&#123; <span class="attr">name</span>: <span class="string">&#x27;工人&#x27;</span>, <span class="attr">fig</span>: <span class="string">&#x27;NotAllowed&#x27;</span>, <span class="attr">fill2</span>: <span class="string">&#x27;green&#x27;</span> &#125;,</span><br><span class="line">	&#123; <span class="attr">name</span>: <span class="string">&#x27;岗位&#x27;</span>, <span class="attr">fig</span>: <span class="string">&#x27;Fragile&#x27;</span>, <span class="attr">fill2</span>: <span class="string">&#x27;yellow&#x27;</span> &#125;,</span><br><span class="line">];</span><br><span class="line">myDiagram.model = myModel; <span class="comment">//将模型数据绑定到画布图上</span></span><br></pre></td></tr></table></figure>

<p>代码释疑：以上我们给画布对象定义了两种节点模板，一种是文本节点，另一种是形状节点（Node）。在形状节点中，我们定义了数据模型的通用节点样式，就是这一段代码</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123; <span class="comment">/* Shape的参数。宽高颜色等等*/</span>figure: <span class="string">&quot;Club&quot;</span>, <span class="attr">width</span>: <span class="number">40</span>, <span class="attr">height</span>: <span class="number">60</span>, <span class="attr">margin</span>: <span class="number">4</span>, <span class="attr">fill</span>: <span class="string">&#x27;red&#x27;</span> &#125;,</span><br></pre></td></tr></table></figure>

<p><strong>然后通过 <code>new go.Binding(&quot;figure&quot;, &quot;fig&quot;)</code>方法将模板里面的属性映射到数据实例中，比如这里模板里面的 figure 属性定义的是 Club，如果在我们的数据里面定义 fig 属性，那么它就会覆盖模板里面的 figure 的默认值。同样，fill 和 fill2 也是通过同样的原理去区别模板中的样式和实例中的实际样式的！</strong><br>注：更多 figure 属性的取值详见 <a target="_blank" rel="noopener" href="https://gojs.net/latest/extensions/Figures.js">这里</a><br>效果如下：<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420175144453.gif" alt="在这里插入图片描述"><br>由此可见我们数据里面的属性会覆盖模板的原始属性，如果是新增的节点，由于没有自定义数据属性，所以呈现到界面上面的时候就是模板里面的原生样式！</p>
<p>（5）节点连线</p>
<p>有了上面的基础，我们可以在画布上面画出我们想要的图形效果了，可是还没有连线。我们知道连线是建立在节点模型的上面的，于是乎我们的 Model 又分为了以下三种类型：</p>
<p>Model：最基本的（不带连线，如上面的例子）<br>GraphLinksModel ：高级点的动态连线图<br>TreeModel：树形图的模型（从例子看好像用的不多）<br>GraphLinksModel 中为 model.nodeDataArray 提供 model.linkDataArray 为 node 节点连线保存数据模型信息，其实也是的一个 JSON 数组对象，每个线条都有两个属性 “to” 和 “from” 即 Node 节点的“key”值，两个属性代表两个 key 表示两个节点间的连线。</p>
<p>我们上面已经写过最基本的 Model 的例子了，我们再来个带连线的 Model 的示例</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myModel = objGo(go.GraphLinksModel);</span><br><span class="line">myModel.nodeDataArray = [</span><br><span class="line">	&#123; <span class="attr">key</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;工厂&#x27;</span> &#125;,</span><br><span class="line">	&#123; <span class="attr">key</span>: <span class="string">&#x27;bbb&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;车间&#x27;</span> &#125;,</span><br><span class="line">	&#123; <span class="attr">key</span>: <span class="string">&#x27;ccc&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;车间&#x27;</span> &#125;,</span><br><span class="line">];</span><br><span class="line">myModel.linkDataArray = [</span><br><span class="line">	&#123; <span class="attr">from</span>: <span class="string">&#x27;aaa&#x27;</span>, <span class="attr">to</span>: <span class="string">&#x27;bbb&#x27;</span> &#125;,</span><br><span class="line">	&#123; <span class="attr">from</span>: <span class="string">&#x27;bbb&#x27;</span>, <span class="attr">to</span>: <span class="string">&#x27;ccc&#x27;</span> &#125;,</span><br><span class="line">];</span><br><span class="line">myDiagram.model = myModel;</span><br></pre></td></tr></table></figure>

<p>效果如下：<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420175221785.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTkxODY1Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>学习了 Model、GraphLinksModel，还剩下一种 TreeModel 树节点的模型，这个博主不打算做详细介绍，有兴趣可以直接查看官网。</p>
<h1 id="三、综合效果"><a href="#三、综合效果" class="headerlink" title="三、综合效果"></a>三、综合效果</h1><p>关于综合效果，博主不打算将 gojs 的 api 逐个翻个遍了，这样太耗时间，伤不起，只是将官方示例中的部分源码截取出来供大家参考。有需要的再细究！</p>
<h2 id="1、自定义流程的使用"><a href="#1、自定义流程的使用" class="headerlink" title="1、自定义流程的使用"></a>1、自定义流程的使用</h2><p>效果如下：<br><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420175330889.gif" alt="在这里插入图片描述"><br>建议各位 copy 代码，在本地看到效果，然后再根据实际需求去研究它的 api，这样才不会太盲目而花费太多时间。</p>
<h2 id="2、工业流程图"><a href="#2、工业流程图" class="headerlink" title="2、工业流程图"></a>2、工业流程图</h2><p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img-blog.csdnimg.cn/20210420175534446.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTkxODY1Nw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><p>本文根据 js 的一些基础用法做了简单介绍，今天就先到这里，以后有问题了再来跟大家分享。如果你的项目里面也有这种业务需求，可以用起来试试！需要说明一点，如果您的公司不缺钱，建议使用正版授权的组件，毕竟尊重作者的劳动成果很重要！</p>
<p>本文原创出处：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/landeanfen/">http://www.cnblogs.com/landeanfen/</a></p>
<h1 id="五、附三中-①②-代码"><a href="#五、附三中-①②-代码" class="headerlink" title="五、附三中 ①② 代码"></a>五、附三中 ①② 代码</h1><p>①</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">&lt;title&gt;Draggable Link&lt;/title&gt;</span><br><span class="line">&lt;meta name=&quot;description&quot; content=&quot;Drag a link to reconnect it. Nodes have custom Adornments for selection, resizing, and reshaping.&quot; /&gt;</span><br><span class="line">&lt;!-- Copyright 1998-2017 by Northwoods Software Corporation. --&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;script src=&quot;../../gojs/go-debug.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script id=&quot;code&quot;&gt;</span><br><span class="line">  function init() &#123;</span><br><span class="line">    if (window.goSamples) goSamples();  // init for these samples -- you don&#x27;t need to call this</span><br><span class="line">    var objGo = go.GraphObject.make;  // for conciseness in defining templates</span><br><span class="line"></span><br><span class="line">    myDiagram =</span><br><span class="line">      objGo(go.Diagram, &quot;myDiagramDiv&quot;,  // must name or refer to the DIV HTML element</span><br><span class="line">        &#123;</span><br><span class="line">          grid: objGo(go.Panel, &quot;Grid&quot;,</span><br><span class="line">                  objGo(go.Shape, &quot;LineH&quot;, &#123; stroke: &quot;lightgray&quot;, strokeWidth: 0.5 &#125;),</span><br><span class="line">                  objGo(go.Shape, &quot;LineH&quot;, &#123; stroke: &quot;gray&quot;, strokeWidth: 0.5, interval: 10 &#125;),</span><br><span class="line">                  objGo(go.Shape, &quot;LineV&quot;, &#123; stroke: &quot;lightgray&quot;, strokeWidth: 0.5 &#125;),</span><br><span class="line">                  objGo(go.Shape, &quot;LineV&quot;, &#123; stroke: &quot;gray&quot;, strokeWidth: 0.5, interval: 10 &#125;)</span><br><span class="line">                ),</span><br><span class="line">          allowDrop: true,  // must be true to accept drops from the Palette</span><br><span class="line">          &quot;draggingTool.dragsLink&quot;: true,</span><br><span class="line">          &quot;draggingTool.isGridSnapEnabled&quot;: true,</span><br><span class="line">          &quot;linkingTool.isUnconnectedLinkValid&quot;: true,</span><br><span class="line">          &quot;linkingTool.portGravity&quot;: 20,</span><br><span class="line">          &quot;relinkingTool.isUnconnectedLinkValid&quot;: true,</span><br><span class="line">          &quot;relinkingTool.portGravity&quot;: 20,</span><br><span class="line">          &quot;relinkingTool.fromHandleArchetype&quot;:</span><br><span class="line">            objGo(go.Shape, &quot;Diamond&quot;, &#123; segmentIndex: 0, cursor: &quot;pointer&quot;, desiredSize: new go.Size(8, 8), fill: &quot;tomato&quot;, stroke: &quot;darkred&quot; &#125;),</span><br><span class="line">          &quot;relinkingTool.toHandleArchetype&quot;:</span><br><span class="line">            objGo(go.Shape, &quot;Diamond&quot;, &#123; segmentIndex: -1, cursor: &quot;pointer&quot;, desiredSize: new go.Size(8, 8), fill: &quot;darkred&quot;, stroke: &quot;tomato&quot; &#125;),</span><br><span class="line">          &quot;linkReshapingTool.handleArchetype&quot;:</span><br><span class="line">            objGo(go.Shape, &quot;Diamond&quot;, &#123; desiredSize: new go.Size(7, 7), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;),</span><br><span class="line">          rotatingTool: objGo(TopRotatingTool),  // defined below</span><br><span class="line">          &quot;rotatingTool.snapAngleMultiple&quot;: 15,</span><br><span class="line">          &quot;rotatingTool.snapAngleEpsilon&quot;: 15,</span><br><span class="line">          &quot;undoManager.isEnabled&quot;: true</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    // when the document is modified, add a &quot;*&quot; to the title and enable the &quot;Save&quot; button</span><br><span class="line">    myDiagram.addDiagramListener(&quot;Modified&quot;, function(e) &#123;</span><br><span class="line">      var button = document.getElementById(&quot;SaveButton&quot;);</span><br><span class="line">      if (button) button.disabled = !myDiagram.isModified;</span><br><span class="line">      var idx = document.title.indexOf(&quot;*&quot;);</span><br><span class="line">      if (myDiagram.isModified) &#123;</span><br><span class="line">        if (idx &lt; 0) document.title += &quot;*&quot;;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        if (idx &gt;= 0) document.title = document.title.substr(0, idx);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // Define a function for creating a &quot;port&quot; that is normally transparent.</span><br><span class="line">    // The &quot;name&quot; is used as the GraphObject.portId, the &quot;spot&quot; is used to control how links connect</span><br><span class="line">    // and where the port is positioned on the node, and the boolean &quot;output&quot; and &quot;input&quot; arguments</span><br><span class="line">    // control whether the user can draw links from or to the port.</span><br><span class="line">    function makePort(name, spot, output, input) &#123;</span><br><span class="line">      // the port is basically just a small transparent square</span><br><span class="line">      return objGo(go.Shape, &quot;Circle&quot;,</span><br><span class="line">               &#123;</span><br><span class="line">                  fill: null,  // not seen, by default; set to a translucent gray by showSmallPorts, defined below</span><br><span class="line">                  stroke: null,</span><br><span class="line">                  desiredSize: new go.Size(7, 7),</span><br><span class="line">                  alignment: spot,  // align the port on the main Shape</span><br><span class="line">                  alignmentFocus: spot,  // just inside the Shape</span><br><span class="line">                  portId: name,  // declare this object to be a &quot;port&quot;</span><br><span class="line">                  fromSpot: spot, toSpot: spot,  // declare where links may connect at this port</span><br><span class="line">                  fromLinkable: output, toLinkable: input,  // declare whether the user may draw links to/from here</span><br><span class="line">                  cursor: &quot;pointer&quot;  // show a different cursor to indicate potential link point</span><br><span class="line">               &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var nodeSelectionAdornmentTemplate =</span><br><span class="line">      objGo(go.Adornment, &quot;Auto&quot;,</span><br><span class="line">        objGo(go.Shape, &#123; fill: null, stroke: &quot;deepskyblue&quot;, strokeWidth: 1.5, strokeDashArray: [4, 2] &#125;),</span><br><span class="line">        objGo(go.Placeholder)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    var nodeResizeAdornmentTemplate =</span><br><span class="line">      objGo(go.Adornment, &quot;Spot&quot;,</span><br><span class="line">        &#123; locationSpot: go.Spot.Right &#125;,</span><br><span class="line">        objGo(go.Placeholder),</span><br><span class="line">        objGo(go.Shape, &#123; alignment: go.Spot.TopLeft, cursor: &quot;nw-resize&quot;, desiredSize: new go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;),</span><br><span class="line">        objGo(go.Shape, &#123; alignment: go.Spot.Top, cursor: &quot;n-resize&quot;, desiredSize: new go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;),</span><br><span class="line">        objGo(go.Shape, &#123; alignment: go.Spot.TopRight, cursor: &quot;ne-resize&quot;, desiredSize: new go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;),</span><br><span class="line"></span><br><span class="line">        objGo(go.Shape, &#123; alignment: go.Spot.Left, cursor: &quot;w-resize&quot;, desiredSize: new go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;),</span><br><span class="line">        objGo(go.Shape, &#123; alignment: go.Spot.Right, cursor: &quot;e-resize&quot;, desiredSize: new go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;),</span><br><span class="line"></span><br><span class="line">        objGo(go.Shape, &#123; alignment: go.Spot.BottomLeft, cursor: &quot;se-resize&quot;, desiredSize: new go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;),</span><br><span class="line">        objGo(go.Shape, &#123; alignment: go.Spot.Bottom, cursor: &quot;s-resize&quot;, desiredSize: new go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;),</span><br><span class="line">        objGo(go.Shape, &#123; alignment: go.Spot.BottomRight, cursor: &quot;sw-resize&quot;, desiredSize: new go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    var nodeRotateAdornmentTemplate =</span><br><span class="line">      objGo(go.Adornment,</span><br><span class="line">        &#123; locationSpot: go.Spot.Center, locationObjectName: &quot;CIRCLE&quot; &#125;,</span><br><span class="line">        objGo(go.Shape, &quot;Circle&quot;, &#123; name: &quot;CIRCLE&quot;, cursor: &quot;pointer&quot;, desiredSize: new go.Size(7, 7), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot; &#125;),</span><br><span class="line">        objGo(go.Shape, &#123; geometryString: &quot;M3.5 7 L3.5 30&quot;, isGeometryPositioned: true, stroke: &quot;deepskyblue&quot;, strokeWidth: 1.5, strokeDashArray: [4, 2] &#125;)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    myDiagram.nodeTemplate =</span><br><span class="line">      objGo(go.Node, &quot;Spot&quot;,</span><br><span class="line">        &#123; locationSpot: go.Spot.Center &#125;,</span><br><span class="line">        new go.Binding(&quot;location&quot;, &quot;loc&quot;, go.Point.parse).makeTwoWay(go.Point.stringify),</span><br><span class="line">        &#123; selectable: true, selectionAdornmentTemplate: nodeSelectionAdornmentTemplate &#125;,</span><br><span class="line">        &#123; resizable: true, resizeObjectName: &quot;PANEL&quot;, resizeAdornmentTemplate: nodeResizeAdornmentTemplate &#125;,</span><br><span class="line">        &#123; rotatable: true, rotateAdornmentTemplate: nodeRotateAdornmentTemplate &#125;,</span><br><span class="line">        new go.Binding(&quot;angle&quot;).makeTwoWay(),</span><br><span class="line">        // the main object is a Panel that surrounds a TextBlock with a Shape</span><br><span class="line">        objGo(go.Panel, &quot;Auto&quot;,</span><br><span class="line">          &#123; name: &quot;PANEL&quot; &#125;,</span><br><span class="line">          new go.Binding(&quot;desiredSize&quot;, &quot;size&quot;, go.Size.parse).makeTwoWay(go.Size.stringify),</span><br><span class="line">          objGo(go.Shape, &quot;Rectangle&quot;,  // default figure</span><br><span class="line">            &#123;</span><br><span class="line">              portId: &quot;&quot;, // the default port: if no spot on link data, use closest side</span><br><span class="line">              fromLinkable: true, toLinkable: true, cursor: &quot;pointer&quot;,</span><br><span class="line">              fill: &quot;white&quot;,  // default color</span><br><span class="line">              strokeWidth: 2</span><br><span class="line">            &#125;,</span><br><span class="line">            new go.Binding(&quot;figure&quot;),</span><br><span class="line">            new go.Binding(&quot;fill&quot;)),</span><br><span class="line">          objGo(go.TextBlock,</span><br><span class="line">            &#123;</span><br><span class="line">              font: &quot;bold 11pt Helvetica, Arial, sans-serif&quot;,</span><br><span class="line">              margin: 8,</span><br><span class="line">              maxSize: new go.Size(160, NaN),</span><br><span class="line">              wrap: go.TextBlock.WrapFit,</span><br><span class="line">              editable: true</span><br><span class="line">            &#125;,</span><br><span class="line">            new go.Binding(&quot;text&quot;).makeTwoWay())</span><br><span class="line">        ),</span><br><span class="line">        // four small named ports, one on each side:</span><br><span class="line">        makePort(&quot;T&quot;, go.Spot.Top, false, true),</span><br><span class="line">        makePort(&quot;L&quot;, go.Spot.Left, true, true),</span><br><span class="line">        makePort(&quot;R&quot;, go.Spot.Right, true, true),</span><br><span class="line">        makePort(&quot;B&quot;, go.Spot.Bottom, true, false),</span><br><span class="line">        &#123; // handle mouse enter/leave events to show/hide the ports</span><br><span class="line">          mouseEnter: function(e, node) &#123; showSmallPorts(node, true); &#125;,</span><br><span class="line">          mouseLeave: function(e, node) &#123; showSmallPorts(node, false); &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    function showSmallPorts(node, show) &#123;</span><br><span class="line">      node.ports.each(function(port) &#123;</span><br><span class="line">        if (port.portId !== &quot;&quot;) &#123;  // don&#x27;t change the default port, which is the big shape</span><br><span class="line">          port.fill = show ? &quot;rgba(0,0,0,.3)&quot; : null;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var linkSelectionAdornmentTemplate =</span><br><span class="line">      objGo(go.Adornment, &quot;Link&quot;,</span><br><span class="line">        objGo(go.Shape,</span><br><span class="line">          // isPanelMain declares that this Shape shares the Link.geometry</span><br><span class="line">          &#123; isPanelMain: true, fill: null, stroke: &quot;deepskyblue&quot;, strokeWidth: 0 &#125;)  // use selection object&#x27;s strokeWidth</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    myDiagram.linkTemplate =</span><br><span class="line">      objGo(go.Link,  // the whole link panel</span><br><span class="line">        &#123; selectable: true, selectionAdornmentTemplate: linkSelectionAdornmentTemplate &#125;,</span><br><span class="line">        &#123; relinkableFrom: true, relinkableTo: true, reshapable: true &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          routing: go.Link.AvoidsNodes,</span><br><span class="line">          curve: go.Link.JumpOver,</span><br><span class="line">          corner: 5,</span><br><span class="line">          toShortLength: 4</span><br><span class="line">        &#125;,</span><br><span class="line">        new go.Binding(&quot;points&quot;).makeTwoWay(),</span><br><span class="line">        objGo(go.Shape,  // the link path shape</span><br><span class="line">          &#123; isPanelMain: true, strokeWidth: 2 &#125;),</span><br><span class="line">        objGo(go.Shape,  // the arrowhead</span><br><span class="line">          &#123; toArrow: &quot;Standard&quot;, stroke: null &#125;),</span><br><span class="line">        objGo(go.Panel, &quot;Auto&quot;,</span><br><span class="line">          new go.Binding(&quot;visible&quot;, &quot;isSelected&quot;).ofObject(),</span><br><span class="line">          objGo(go.Shape, &quot;RoundedRectangle&quot;,  // the link shape</span><br><span class="line">            &#123; fill: &quot;#F8F8F8&quot;, stroke: null &#125;),</span><br><span class="line">          objGo(go.TextBlock,</span><br><span class="line">            &#123;</span><br><span class="line">              textAlign: &quot;center&quot;,</span><br><span class="line">              font: &quot;10pt helvetica, arial, sans-serif&quot;,</span><br><span class="line">              stroke: &quot;#919191&quot;,</span><br><span class="line">              margin: 2,</span><br><span class="line">              minSize: new go.Size(10, NaN),</span><br><span class="line">              editable: true</span><br><span class="line">            &#125;,</span><br><span class="line">            new go.Binding(&quot;text&quot;).makeTwoWay())</span><br><span class="line">        )</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    load();  // load an initial diagram from some JSON text</span><br><span class="line"></span><br><span class="line">    // initialize the Palette that is on the left side of the page</span><br><span class="line">    myPalette =</span><br><span class="line">      objGo(go.Palette, &quot;myPaletteDiv&quot;,  // must name or refer to the DIV HTML element</span><br><span class="line">        &#123;</span><br><span class="line">          maxSelectionCount: 1,</span><br><span class="line">          nodeTemplateMap: myDiagram.nodeTemplateMap,  // share the templates used by myDiagram</span><br><span class="line">          linkTemplate: // simplify the link template, just in this Palette</span><br><span class="line">            objGo(go.Link,</span><br><span class="line">              &#123; // because the GridLayout.alignment is Location and the nodes have locationSpot == Spot.Center,</span><br><span class="line">                // to line up the Link in the same manner we have to pretend the Link has the same location spot</span><br><span class="line">                locationSpot: go.Spot.Center,</span><br><span class="line">                selectionAdornmentTemplate:</span><br><span class="line">                  objGo(go.Adornment, &quot;Link&quot;,</span><br><span class="line">                    &#123; locationSpot: go.Spot.Center &#125;,</span><br><span class="line">                    objGo(go.Shape,</span><br><span class="line">                      &#123; isPanelMain: true, fill: null, stroke: &quot;deepskyblue&quot;, strokeWidth: 0 &#125;),</span><br><span class="line">                    objGo(go.Shape,  // the arrowhead</span><br><span class="line">                      &#123; toArrow: &quot;Standard&quot;, stroke: null &#125;)</span><br><span class="line">                  )</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                routing: go.Link.AvoidsNodes,</span><br><span class="line">                curve: go.Link.JumpOver,</span><br><span class="line">                corner: 5,</span><br><span class="line">                toShortLength: 4</span><br><span class="line">              &#125;,</span><br><span class="line">              new go.Binding(&quot;points&quot;),</span><br><span class="line">              objGo(go.Shape,  // the link path shape</span><br><span class="line">                &#123; isPanelMain: true, strokeWidth: 2 &#125;),</span><br><span class="line">              objGo(go.Shape,  // the arrowhead</span><br><span class="line">                &#123; toArrow: &quot;Standard&quot;, stroke: null &#125;)</span><br><span class="line">            ),</span><br><span class="line">          model: new go.GraphLinksModel([  // specify the contents of the Palette</span><br><span class="line">            &#123; text: &quot;Start&quot;, figure: &quot;Circle&quot;, fill: &quot;#00AD5F&quot; &#125;,</span><br><span class="line">            &#123; text: &quot;Step&quot; &#125;,</span><br><span class="line">            &#123; text: &quot;DB&quot;, figure: &quot;Database&quot;, fill: &quot;lightgray&quot; &#125;,</span><br><span class="line">            &#123; text: &quot;???&quot;, figure: &quot;Diamond&quot;, fill: &quot;lightskyblue&quot; &#125;,</span><br><span class="line">            &#123; text: &quot;End&quot;, figure: &quot;Circle&quot;, fill: &quot;#CE0620&quot; &#125;,</span><br><span class="line">            &#123; text: &quot;Comment&quot;, figure: &quot;RoundedRectangle&quot;, fill: &quot;lightyellow&quot; &#125;</span><br><span class="line">          ], [</span><br><span class="line">            // the Palette also has a disconnected Link, which the user can drag-and-drop</span><br><span class="line">            &#123; points: new go.List(go.Point).addAll([new go.Point(0, 0), new go.Point(30, 0), new go.Point(30, 40), new go.Point(60, 40)]) &#125;</span><br><span class="line">          ])</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  function TopRotatingTool() &#123;</span><br><span class="line">    go.RotatingTool.call(this);</span><br><span class="line">  &#125;</span><br><span class="line">  go.Diagram.inherit(TopRotatingTool, go.RotatingTool);</span><br><span class="line"></span><br><span class="line">  /** @override */</span><br><span class="line">  TopRotatingTool.prototype.updateAdornments = function(part) &#123;</span><br><span class="line">    go.RotatingTool.prototype.updateAdornments.call(this, part);</span><br><span class="line">    var adornment = part.findAdornment(&quot;Rotating&quot;);</span><br><span class="line">    if (adornment !== null) &#123;</span><br><span class="line">      adornment.location = part.rotateObject.getDocumentPoint(new go.Spot(0.5, 0, 0, -30));  // above middle top</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  /** @override */</span><br><span class="line">  TopRotatingTool.prototype.rotate = function(newangle) &#123;</span><br><span class="line">    go.RotatingTool.prototype.rotate.call(this, newangle + 90);</span><br><span class="line">  &#125;;</span><br><span class="line">  // end of TopRotatingTool class</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // Show the diagram&#x27;s model in JSON format that the user may edit</span><br><span class="line">  function save() &#123;</span><br><span class="line">    saveDiagramProperties();  // do this first, before writing to JSON</span><br><span class="line">    document.getElementById(&quot;mySavedModel&quot;).value = myDiagram.model.toJson();</span><br><span class="line">    myDiagram.isModified = false;</span><br><span class="line">  &#125;</span><br><span class="line">  function load() &#123;</span><br><span class="line">    myDiagram.model = go.Model.fromJson(document.getElementById(&quot;mySavedModel&quot;).value);</span><br><span class="line">    loadDiagramProperties();  // do this after the Model.modelData has been brought into memory</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function saveDiagramProperties() &#123;</span><br><span class="line">    myDiagram.model.modelData.position = go.Point.stringify(myDiagram.position);</span><br><span class="line">  &#125;</span><br><span class="line">  function loadDiagramProperties(e) &#123;</span><br><span class="line">    // set Diagram.initialPosition, not Diagram.position, to handle initialization side-effects</span><br><span class="line">    var pos = myDiagram.model.modelData.position;</span><br><span class="line">    if (pos) myDiagram.initialPosition = go.Point.parse(pos);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body onload=&quot;init()&quot;&gt;</span><br><span class="line">&lt;div id=&quot;sample&quot;&gt;</span><br><span class="line">  &lt;div style=&quot;width:100%; white-space:nowrap;&quot;&gt;</span><br><span class="line">    &lt;span style=&quot;display: inline-block; vertical-align: top; width:105px&quot;&gt;</span><br><span class="line">      &lt;div id=&quot;myPaletteDiv&quot; style=&quot;border: solid 1px black; height: 620px&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line"></span><br><span class="line">    &lt;span style=&quot;display: inline-block; vertical-align: top; width:80%&quot;&gt;</span><br><span class="line">      &lt;div id=&quot;myDiagramDiv&quot; style=&quot;border: solid 1px black; height: 620px&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    This sample demonstrates the ability for the user to drag around a Link as if it were a Node.</span><br><span class="line">    When either end of the link passes over a valid port, the port is highlighted.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    The link-dragging functionality is enabled by setting some or all of the following properties:</span><br><span class="line">    &lt;a&gt;DraggingTool.dragsLink&lt;/a&gt;, &lt;a&gt;LinkingTool.isUnconnectedLinkValid&lt;/a&gt;, and</span><br><span class="line">    &lt;a&gt;RelinkingTool.isUnconnectedLinkValid&lt;/a&gt;.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    Note that a Link is present in the &lt;a&gt;Palette&lt;/a&gt; so that it too can be dragged out and onto</span><br><span class="line">    the main Diagram.  Because links are not automatically routed when either end is not connected</span><br><span class="line">    with a Node, the route is provided explicitly when that Palette item is defined.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    This also demonstrates several custom Adornments:</span><br><span class="line">    &lt;a&gt;Part.selectionAdornmentTemplate&lt;/a&gt;, &lt;a&gt;Part.resizeAdornmentTemplate&lt;/a&gt;, and</span><br><span class="line">    &lt;a&gt;Part.rotateAdornmentTemplate&lt;/a&gt;.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    Finally this sample demonstrates saving and restoring the &lt;a&gt;Diagram.position&lt;/a&gt; as a property</span><br><span class="line">    on the &lt;a&gt;Model.modelData&lt;/a&gt; object that is automatically saved and restored when calling &lt;a&gt;Model.toJson&lt;/a&gt;</span><br><span class="line">    and &lt;a&gt;Model.fromJson&lt;/a&gt;.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button id=&quot;SaveButton&quot; onclick=&quot;save()&quot;&gt;Save&lt;/button&gt;</span><br><span class="line">      &lt;button onclick=&quot;load()&quot;&gt;Load&lt;/button&gt;</span><br><span class="line">      Diagram Model saved in JSON format:</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;textarea id=&quot;mySavedModel&quot; style=&quot;width:100%;height:300px&quot;&gt;</span><br><span class="line">&#123; &quot;class&quot;: &quot;go.GraphLinksModel&quot;,</span><br><span class="line">  &quot;linkFromPortIdProperty&quot;: &quot;fromPort&quot;,</span><br><span class="line">  &quot;linkToPortIdProperty&quot;: &quot;toPort&quot;,</span><br><span class="line">  &quot;nodeDataArray&quot;: [</span><br><span class="line"> ],</span><br><span class="line">  &quot;linkDataArray&quot;: [</span><br><span class="line"> ]&#125;</span><br><span class="line">    &lt;/textarea&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>②</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">&lt;title&gt;Process Flow&lt;/title&gt;</span><br><span class="line">&lt;meta name=&quot;description&quot; content=&quot;A simple process flow or SCADA diagram editor, simulating equipment monitoring and control.&quot; /&gt;</span><br><span class="line">&lt;!-- Copyright 1998-2017 by Northwoods Software Corporation. --&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;script src=&quot;../../gojs/go-debug.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script id=&quot;code&quot;&gt;</span><br><span class="line">  function init() &#123;</span><br><span class="line">    if (window.goSamples) goSamples();  // init for these samples -- you don&#x27;t need to call this</span><br><span class="line">    var $ = go.GraphObject.make;  // for more concise visual tree definitions</span><br><span class="line"></span><br><span class="line">    myDiagram =</span><br><span class="line">      $(go.Diagram, &quot;myDiagramDiv&quot;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;grid.visible&quot;: true,</span><br><span class="line">          &quot;grid.gridCellSize&quot;: new go.Size(30, 20),</span><br><span class="line">          &quot;draggingTool.isGridSnapEnabled&quot;: true,</span><br><span class="line">          &quot;resizingTool.isGridSnapEnabled&quot;: true,</span><br><span class="line">          &quot;rotatingTool.snapAngleMultiple&quot;: 90,</span><br><span class="line">          &quot;rotatingTool.snapAngleEpsilon&quot;: 45,</span><br><span class="line">          &quot;undoManager.isEnabled&quot;: true</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    // when the document is modified, add a &quot;*&quot; to the title and enable the &quot;Save&quot; button</span><br><span class="line">    myDiagram.addDiagramListener(&quot;Modified&quot;, function(e) &#123;</span><br><span class="line">      var button = document.getElementById(&quot;SaveButton&quot;);</span><br><span class="line">      if (button) button.disabled = !myDiagram.isModified;</span><br><span class="line">      var idx = document.title.indexOf(&quot;*&quot;);</span><br><span class="line">      if (myDiagram.isModified) &#123;</span><br><span class="line">        if (idx &lt; 0) document.title += &quot;*&quot;;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        if (idx &gt;= 0) document.title = document.title.substr(0, idx);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    myDiagram.nodeTemplateMap.add(&quot;Process&quot;,</span><br><span class="line">      $(go.Node, &quot;Auto&quot;,</span><br><span class="line">        &#123; locationSpot: new go.Spot(0.5, 0.5), locationObjectName: &quot;SHAPE&quot;,</span><br><span class="line">          resizable: true, resizeObjectName: &quot;SHAPE&quot; &#125;,</span><br><span class="line">        new go.Binding(&quot;location&quot;, &quot;pos&quot;, go.Point.parse).makeTwoWay(go.Point.stringify),</span><br><span class="line">        $(go.Shape, &quot;Cylinder1&quot;,</span><br><span class="line">          &#123; name: &quot;SHAPE&quot;,</span><br><span class="line">            strokeWidth: 2,</span><br><span class="line">            fill: $(go.Brush, &quot;Linear&quot;,</span><br><span class="line">                    &#123; start: go.Spot.Left, end: go.Spot.Right,</span><br><span class="line">                      0: &quot;gray&quot;, 0.5: &quot;white&quot;, 1: &quot;gray&quot; &#125;),</span><br><span class="line">            minSize: new go.Size(50, 50),</span><br><span class="line">            portId: &quot;&quot;, fromSpot: go.Spot.AllSides, toSpot: go.Spot.AllSides</span><br><span class="line">          &#125;,</span><br><span class="line">          new go.Binding(&quot;desiredSize&quot;, &quot;size&quot;, go.Size.parse).makeTwoWay(go.Size.stringify)),</span><br><span class="line">        $(go.TextBlock,</span><br><span class="line">          &#123; alignment: go.Spot.Center, textAlign: &quot;center&quot;, margin: 5,</span><br><span class="line">            editable: true &#125;,</span><br><span class="line">          new go.Binding(&quot;text&quot;).makeTwoWay())</span><br><span class="line">      ));</span><br><span class="line"></span><br><span class="line">    myDiagram.nodeTemplateMap.add(&quot;Valve&quot;,</span><br><span class="line">      $(go.Node, &quot;Vertical&quot;,</span><br><span class="line">        &#123; locationSpot: new go.Spot(0.5, 1, 0, -21), locationObjectName: &quot;SHAPE&quot;,</span><br><span class="line">          selectionObjectName: &quot;SHAPE&quot;, rotatable: true &#125;,</span><br><span class="line">        new go.Binding(&quot;angle&quot;).makeTwoWay(),</span><br><span class="line">        new go.Binding(&quot;location&quot;, &quot;pos&quot;, go.Point.parse).makeTwoWay(go.Point.stringify),</span><br><span class="line">        $(go.TextBlock,</span><br><span class="line">          &#123; alignment: go.Spot.Center, textAlign: &quot;center&quot;, margin: 5, editable: true &#125;,</span><br><span class="line">          new go.Binding(&quot;text&quot;).makeTwoWay(),</span><br><span class="line">          // keep the text upright, even when the whole node has been rotated upside down</span><br><span class="line">          new go.Binding(&quot;angle&quot;, &quot;angle&quot;, function(a) &#123; return a === 180 ? 180 : 0; &#125;).ofObject()),</span><br><span class="line">        $(go.Shape,</span><br><span class="line">          &#123; name: &quot;SHAPE&quot;,</span><br><span class="line">            geometryString: &quot;F1 M0 0 L40 20 40 0 0 20z M20 10 L20 30 M12 30 L28 30&quot;,</span><br><span class="line">            strokeWidth: 2,</span><br><span class="line">            fill: $(go.Brush, &quot;Linear&quot;, &#123; 0: &quot;gray&quot;, 0.35: &quot;white&quot;, 0.7: &quot;gray&quot; &#125;),</span><br><span class="line">            portId: &quot;&quot;, fromSpot: new go.Spot(1, 0.35), toSpot: new go.Spot(0, 0.35) &#125;)</span><br><span class="line">      ));</span><br><span class="line"></span><br><span class="line">    myDiagram.linkTemplate =</span><br><span class="line">      $(go.Link,</span><br><span class="line">        &#123; routing: go.Link.AvoidsNodes, curve: go.Link.JumpGap, corner: 10, reshapable: true, toShortLength: 7 &#125;,</span><br><span class="line">        new go.Binding(&quot;points&quot;).makeTwoWay(),</span><br><span class="line">        // mark each Shape to get the link geometry with isPanelMain: true</span><br><span class="line">        $(go.Shape, &#123; isPanelMain: true, stroke: &quot;black&quot;, strokeWidth: 5 &#125;),</span><br><span class="line">        $(go.Shape, &#123; isPanelMain: true, stroke: &quot;gray&quot;, strokeWidth: 3 &#125;),</span><br><span class="line">        $(go.Shape, &#123; isPanelMain: true, stroke: &quot;white&quot;, strokeWidth: 1, name: &quot;PIPE&quot;, strokeDashArray: [10, 10] &#125;),</span><br><span class="line">        $(go.Shape, &#123; toArrow: &quot;Triangle&quot;, fill: &quot;black&quot;, stroke: null &#125;)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    load();</span><br><span class="line"></span><br><span class="line">    loop();  // animate some flow through the pipes</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function loop() &#123;</span><br><span class="line">    var diagram = myDiagram;</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">      var oldskips = diagram.skipsUndoManager;</span><br><span class="line">      diagram.skipsUndoManager = true;</span><br><span class="line">      diagram.links.each(function(link) &#123;</span><br><span class="line">          var shape = link.findObject(&quot;PIPE&quot;);</span><br><span class="line">          var off = shape.strokeDashOffset - 2;</span><br><span class="line">          shape.strokeDashOffset = (off &lt;= 0) ? 20 : off;</span><br><span class="line">        &#125;);</span><br><span class="line">      diagram.skipsUndoManager = oldskips;</span><br><span class="line">      loop();</span><br><span class="line">    &#125;, 100);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function save() &#123;</span><br><span class="line">    document.getElementById(&quot;mySavedModel&quot;).value = myDiagram.model.toJson();</span><br><span class="line">    myDiagram.isModified = false;</span><br><span class="line">  &#125;</span><br><span class="line">  function load() &#123;</span><br><span class="line">    myDiagram.model = go.Model.fromJson(document.getElementById(&quot;mySavedModel&quot;).value);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body onload=&quot;init()&quot;&gt;</span><br><span class="line">&lt;div id=&quot;sample&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;myDiagramDiv&quot; style=&quot;border: solid 1px black; width:100%; height:500px&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    A &lt;em&gt;process flow diagram&lt;/em&gt; is commonly used in chemical and process engineering to indicate the general flow of plant processes and equipment.</span><br><span class="line">    A simple SCADA diagram, with animation of the flow along the pipes, is implemented here.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    The diagram displays the background grid layer by setting &lt;b&gt;grid.visible&lt;/b&gt; to true,</span><br><span class="line">    and also allows snapping to the grid using &lt;a&gt;DraggingTool.isGridSnapEnabled&lt;/a&gt;,</span><br><span class="line">    &lt;a&gt;ResizingTool.isGridSnapEnabled&lt;/a&gt;, and &lt;a&gt;RotatingTool.snapAngleMultiple&lt;/a&gt; alongside &lt;a&gt;RotatingTool.snapAngleEpsilon&lt;/a&gt;.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    The diagram also uses the &lt;b&gt;loop&lt;/b&gt; function to animate the links by adjusting the &lt;a&gt;Shape.strokeDashOffset&lt;/a&gt; every 100 ms.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button id=&quot;SaveButton&quot; onclick=&quot;save()&quot;&gt;Save&lt;/button&gt;</span><br><span class="line">      &lt;button onclick=&quot;load()&quot;&gt;Load&lt;/button&gt;</span><br><span class="line">      Diagram Model saved in JSON format:</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;textarea id=&quot;mySavedModel&quot; style=&quot;width:100%;height:300px&quot;&gt;</span><br><span class="line">&#123; &quot;class&quot;: &quot;go.GraphLinksModel&quot;,</span><br><span class="line">  &quot;nodeDataArray&quot;: [</span><br><span class="line">&#123;&quot;key&quot;:&quot;P1&quot;, &quot;category&quot;:&quot;Process&quot;, &quot;pos&quot;:&quot;150 120&quot;, &quot;text&quot;:&quot;Process&quot;&#125;,</span><br><span class="line">&#123;&quot;key&quot;:&quot;P2&quot;, &quot;category&quot;:&quot;Process&quot;, &quot;pos&quot;:&quot;330 320&quot;, &quot;text&quot;:&quot;Tank&quot;&#125;,</span><br><span class="line">&#123;&quot;key&quot;:&quot;V1&quot;, &quot;category&quot;:&quot;Valve&quot;, &quot;pos&quot;:&quot;270 120&quot;, &quot;text&quot;:&quot;V1&quot;&#125;,</span><br><span class="line">&#123;&quot;key&quot;:&quot;P3&quot;, &quot;category&quot;:&quot;Process&quot;, &quot;pos&quot;:&quot;150 420&quot;, &quot;text&quot;:&quot;Pump&quot;&#125;,</span><br><span class="line">&#123;&quot;key&quot;:&quot;V2&quot;, &quot;category&quot;:&quot;Valve&quot;, &quot;pos&quot;:&quot;150 280&quot;, &quot;text&quot;:&quot;VM&quot;, &quot;angle&quot;:270&#125;,</span><br><span class="line">&#123;&quot;key&quot;:&quot;V3&quot;, &quot;category&quot;:&quot;Valve&quot;, &quot;pos&quot;:&quot;270 420&quot;, &quot;text&quot;:&quot;V2&quot;, &quot;angle&quot;:180&#125;,</span><br><span class="line">&#123;&quot;key&quot;:&quot;P4&quot;, &quot;category&quot;:&quot;Process&quot;, &quot;pos&quot;:&quot;450 140&quot;, &quot;text&quot;:&quot;Reserve Tank&quot;&#125;,</span><br><span class="line">&#123;&quot;key&quot;:&quot;V4&quot;, &quot;category&quot;:&quot;Valve&quot;, &quot;pos&quot;:&quot;390 60&quot;, &quot;text&quot;:&quot;VA&quot;&#125;,</span><br><span class="line">&#123;&quot;key&quot;:&quot;V5&quot;, &quot;category&quot;:&quot;Valve&quot;, &quot;pos&quot;:&quot;450 260&quot;, &quot;text&quot;:&quot;VB&quot;, &quot;angle&quot;:90&#125;</span><br><span class="line"> ],</span><br><span class="line">  &quot;linkDataArray&quot;: [</span><br><span class="line">&#123;&quot;from&quot;:&quot;P1&quot;, &quot;to&quot;:&quot;V1&quot;&#125;,</span><br><span class="line">&#123;&quot;from&quot;:&quot;P3&quot;, &quot;to&quot;:&quot;V2&quot;&#125;,</span><br><span class="line">&#123;&quot;from&quot;:&quot;V2&quot;, &quot;to&quot;:&quot;P1&quot;&#125;,</span><br><span class="line">&#123;&quot;from&quot;:&quot;P2&quot;, &quot;to&quot;:&quot;V3&quot;&#125;,</span><br><span class="line">&#123;&quot;from&quot;:&quot;V3&quot;, &quot;to&quot;:&quot;P3&quot;&#125;,</span><br><span class="line">&#123;&quot;from&quot;:&quot;V1&quot;, &quot;to&quot;:&quot;V4&quot;&#125;,</span><br><span class="line">&#123;&quot;from&quot;:&quot;V4&quot;, &quot;to&quot;:&quot;P4&quot;&#125;,</span><br><span class="line">&#123;&quot;from&quot;:&quot;V1&quot;, &quot;to&quot;:&quot;P2&quot;&#125;,</span><br><span class="line">&#123;&quot;from&quot;:&quot;P4&quot;, &quot;to&quot;:&quot;V5&quot;&#125;,</span><br><span class="line">&#123;&quot;from&quot;:&quot;V5&quot;, &quot;to&quot;:&quot;P2&quot;&#125;</span><br><span class="line"> ]&#125;</span><br><span class="line">    &lt;/textarea&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Rainux</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://rainuxs.github.io/rainuxs.github.io/Gojs%E7%BB%84%E4%BB%B6------%E5%89%8D%E7%AB%AF%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%8F%92%E4%BB%B6%E4%B9%8B%E5%88%A9%E5%99%A8/">https://rainuxs.github.io/rainuxs.github.io/Gojs%E7%BB%84%E4%BB%B6------%E5%89%8D%E7%AB%AF%E5%9B%BE%E5%BD%A2%E5%8C%96%E6%8F%92%E4%BB%B6%E4%B9%8B%E5%88%A9%E5%99%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://rainuxs.github.io/rainuxs.github.io" target="_blank">Rainux</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/pexels-christina-morillo-1181298.jpg" data-sites="facebook,twitter,wechat,qq"></div><link rel="stylesheet" href="/js/dependCDN/share.min.css" media="print" onload="this.media='all'"><script src="/js/dependCDN/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/%E8%BF%BD%E5%85%89%E8%80%85-%E5%86%8D%E7%9B%B8%E4%BC%9A_%E6%9D%90%E6%96%991703/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/pexels-sabeel-ahammed-68357.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">追光者-再相会_材料1703</div></div></a></div><div class="next-post pull-right"><a href="/%E5%89%8D%E7%AB%AF%E7%9A%84%E5%B0%8F%E6%BF%80%E5%8A%A8%EF%BC%9ANodejs%E5%86%99%E7%AE%80%E5%8D%95%E6%8E%A5%E5%8F%A3%E6%95%99%E7%A8%8B/"><img class="next-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/pexels-christina-morillo-1181298.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">前端的小激动：Nodejs写简单接口教程</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/avatar_img.png" onerror="this.onerror=null;this.src='/img/loading.gif'" alt="avatar"/><div class="author-info__name">Rainux</div><div class="author-info__description">Good Done Good Luck.努力即幸运</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/rainuxs"><i class="fab fa-github"></i><span>Follow Rainux's Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/rainuxs" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:raincode.zhu@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://blog.csdn.net/weixin_49918657" target="_blank" title="CSDN"><i class="fab fa-cuttlefish"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">Rainux's blog ！前端工程师一小枚  <strong>原则：享受美好生活--认真对待事情</strong><br/>CSDN博客：<a style="color:skyblue;font-size:18px" target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_49918657?spm=1010.2135.3001.5343">rainux_rainux</a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E5%9F%BA%E6%9C%AC---%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="前端面试基本---面向过程与面向对象"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/pexels-christina-morillo-1181298.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端面试基本---面向过程与面向对象"/></a><div class="content"><a class="title" href="/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E5%9F%BA%E6%9C%AC---%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="前端面试基本---面向过程与面向对象">前端面试基本---面向过程与面向对象</a><time datetime="2022-08-16T04:00:00.000Z" title="发表于 2022-08-16 12:00:00">2022-08-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/pexels-min-an-1337975.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Rainux</div><div class="footer_custom_text">Hi, welcome to <a href="https://rainuxs.github.io/" style="text-decoration:none">Rainux's blog</a> ! <div><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41019702002937" target="_blank" style="text-decoration:none"><img class="icp-icon" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/beian.png"><span>豫公网安备 41019702002937号</span></a></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/dependCDN/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/dependCDN/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'fW3q5WG7pFToTqTLLKdzr574-gzGzoHsz',
      appKey: 'gqGmBLPen7vYa524PBFUqDEq',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: true,
      serverURLs: 'https://fw3q5wg7.lc-cn-n1-shared.com',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('/js/dependCDN/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>